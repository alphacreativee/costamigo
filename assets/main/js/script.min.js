import{preloadImages}from"../../libs/utils.js";$=jQuery;let lenis=new Lenis({duration:.5,easing:e=>1-Math.pow(1-e,4),smooth:!0,smoothTouch:!1}),isSafari=(lenis.on("scroll",ScrollTrigger.update),gsap.ticker.add(e=>{lenis.raf(1e3*e)}),gsap.ticker.lagSmoothing(0),-1<navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome"));function togglePlayMusic(){let o=$("header .btn-music"),t=$("#player")[0];t?o.on("click",function(e){e.preventDefault(),o.toggleClass("pause");try{t.paused?(t.muted=!1,t.play().catch(e=>{console.error("Lỗi phát nhạc:",e)})):t.pause()}catch(e){console.error("Lỗi điều khiển âm thanh:",e)}}):console.error("Không tìm thấy phần tử audio")}function sectionSlider(){$(".section-slider").length<1||document.querySelectorAll(".tab-content .tab-pane").forEach(t=>{var e=t.querySelector(".slider-swiper-content");let c=t.querySelector(".main-slider");var o=t.querySelector(".swiper-pagination");let d=t.querySelector(".swiper-btn-custom");var r=t.querySelector(".swiper-button-next"),n=t.querySelector(".swiper-button-prev");if(e&&c&&o&&d){var i=new Swiper(e,{loop:!1,effect:"fade",allowTouchMove:!0,slidesPerView:1,freeMode:!0,autoplay:!0,breakpoints:{991:{allowTouchMove:!1,autoplay:!1}}});let a=new Swiper(c,{effect:"fade",loop:!1,slidesPerView:1,pagination:{el:o,clickable:!0,type:"progressbar"},navigation:{nextEl:r,prevEl:n},breakpoints:{991:{navigation:{nextEl:!1,prevEl:!1},pagination:{el:o,clickable:!0,type:"fraction"}}},thumbs:{swiper:i},on:{slideChangeTransitionEnd:function(){var e,o;e=t,o=this.activeIndex,gsap.set(e.querySelectorAll(".slider-swiper-content h4, .slider-swiper-content .desc, .slider-swiper-content .btn-wrapper"),{y:20,opacity:0}),gsap.timeline().fromTo(e.querySelector(`.slider-swiper-content .swiper-slide:nth-child(${o+1}) h4`),{y:20,opacity:0},{y:0,opacity:1,duration:.75}).fromTo(e.querySelector(`.slider-swiper-content .swiper-slide:nth-child(${o+1}) .desc`),{y:20,opacity:0},{y:0,opacity:1,duration:.75},"-=0.5").fromTo(e.querySelector(`.slider-swiper-content .swiper-slide:nth-child(${o+1}) .btn-wrapper`),{y:20,opacity:0},{y:0,opacity:1,duration:.5},"-=0.5")}}});if(991<document.documentElement.clientWidth){let s=0;c.addEventListener("mousemove",e=>{var o=c.getBoundingClientRect(),t=e.clientX-o.left,e=e.clientY-o.top,a=o.width/2,r=d.offsetWidth,n=d.offsetHeight;s=t,d.style.opacity="1",d.style.transform="scale(1)";let i=t-r/2;e-=n/2;let l;i=t<=a-50?(l=180,Math.max(0,Math.min(a-r,i))):50+a<=t?(l=360,Math.max(a,Math.min(o.width-r,i))):(l=180+180*((t-(a-50))/100),Math.max(0,Math.min(o.width-r,i))),e=Math.max(0,Math.min(o.height-n,e)),d.style.left=i+"px",d.style.top=e+"px",d.style.transform=`scale(1) rotate(${l}deg)`}),d.addEventListener("click",e=>{var o=c.getBoundingClientRect(),o=o.width/2,e=(e.clientX,a.activeIndex),t=a.slides.length;s<=o?0<e?(a.slidePrev(),console.log("slidePrev called")):console.log("Cannot slidePrev: at first slide"):e<t-1?(a.slideNext(),console.log("slideNext called")):console.log("Cannot slideNext: at last slide")}),c.addEventListener("mouseleave",()=>{d.style.opacity="0",d.style.transform="scale(0)"})}}else console.error("Missing required elements:",{contentSwiperEl:e,mainSwiperEl:c,paginationEl:o,swiperButton:d})})}function imgWithText(){$(".image-with-text").length<1||(gsap.registerPlugin(ScrollTrigger),document.querySelectorAll(".image-with-text").forEach(e=>{var o,t,a;e.classList.contains("parallax")||(o=e.querySelector(".section-wrapper"),t=e.querySelector(".section-wrapper img"),a=e.querySelector(".detail-slider"),o&&t&&!a&&(gsap.set(t,{scale:1.5}),gsap.to(t,{scale:1,ease:"none",scrollTrigger:{trigger:e,start:"top 80%",end:"bottom top",scrub:!0}})))}),document.querySelectorAll(".image-with-text.parallax").forEach(e=>{var o=e.querySelector("img");gsap.timeline({scrollTrigger:{trigger:e,scrub:!0,pin:!1}}).fromTo(o,{yPercent:-15,ease:"none"},{yPercent:15,ease:"none"})}))}function animationMaskCentral(){document.querySelectorAll(".animation-image").forEach(e=>{gsap.to(e,{scrollTrigger:{trigger:e,start:"top 70%",end:"bottom 70%",onEnter:()=>e.classList.add("show")}})});let e=document.querySelectorAll(".animation-image-banner");window.addEventListener("load",()=>{setTimeout(()=>{e.forEach(e=>{e.classList.add("show")})},300)})}function animationText(){gsap.registerPlugin(ScrollTrigger);var e=document.querySelectorAll("[data-splitting][data-effect-one]"),o=document.querySelectorAll("[data-splitting][data-effect-three]");e.forEach(e=>{let o=e.querySelectorAll(".char"),t=window.getComputedStyle(o[0]).color||"black";var a=getComputedStyle(e).getPropertyValue("--hover-color")||"red";let r=gsap.timeline({paused:!0}).to(o,{color:a,stagger:.05,duration:.2});e.addEventListener("mouseenter",()=>{r.restart()}),e.addEventListener("mouseleave",()=>{gsap.to(o,{color:t,stagger:.05,duration:.2})})}),isSafari?gsap.utils.toArray("[data-effect-two]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 75%",end:"bottom 75%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}):document.querySelectorAll("[data-splitting][data-effect-two]").forEach(e=>{var o=e.querySelectorAll(".char");gsap.fromTo(o,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,stagger:.05,scrollTrigger:{trigger:e,start:"top 60%",end:"bottom 60%"}})}),o.forEach(e=>{var o=e.querySelectorAll(".char");gsap.fromTo(o,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,stagger:.05,scrollTrigger:{trigger:e,start:"top 40%",end:"bottom 40%"}})}),gsap.utils.toArray("[data-fade-in]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 75%",end:"bottom 75%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}),gsap.utils.toArray("[data-fade-in-v2]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 70%",end:"bottom 70%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}),gsap.utils.toArray("[data-fade-in-v3]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 90%",end:"bottom 90%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}),gsap.utils.toArray("[data-fade-in-v4]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 60%",end:"bottom 60%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}),document.querySelectorAll("[data-fade-desc]").forEach((e,o)=>{var t=e.dataset.start||"50%";gsap.fromTo(e,{y:"20%",opacity:0},{y:"0%",opacity:1,duration:.8,ease:"power2.out",scrollTrigger:{trigger:e,start:"top "+t,end:"top "+t,toggleActions:"play none none none"}})}),document.querySelectorAll("[data-fade-desc-v2]").forEach((e,o)=>{var t=e.dataset.start||"70%";gsap.fromTo(e,{y:"20%",opacity:0},{y:"0%",opacity:1,duration:.8,ease:"power2.out",scrollTrigger:{trigger:e,start:"top "+t,end:"top "+t,toggleActions:"play none none none"}})})}function swiperRestaurant(){if(document.querySelector(".swiper-restaurant")){var a=new Swiper(".swiper-restaurant",{effect:"fade",slidesPerView:"auto",centeredSlides:!0}),e=document.querySelectorAll(".section-restaurant__content--title a");let t=e[0];t&&t.classList.add("active"),e.forEach((e,o)=>{e.addEventListener("mouseover",function(){a.slideTo(o),t&&t.classList.remove("active"),e.classList.add("active"),t=e})}),document.documentElement.clientWidth<991&&document.querySelector(".swiper-res-mobile")&&(a=new Swiper(".swiper-res-mobile",{slidesPerView:1.25,spaceBetween:24,slidesOffsetAfter:24,slidesOffsetBefore:24}))}}function swiperAct(){if(document.querySelector(".act-slider")){document.querySelector(".act-slider"),document.querySelector(".swiper-act-content");var o=new Swiper(".swiper-act-content",{slidesPerView:1,watchSlidesProgress:!0,watchSlidesVisibility:!0,effect:"fade",fadeEffect:{crossFade:!0},spaceBetween:30,allowTouchMove:!1});window.innerWidth;let e=new Swiper(".act-slider",{slidesPerView:1,watchSlidesProgress:!0,breakpoints:{991:{slidesPerView:1,pagination:{el:".section-act__slider .swiper-pagination",clickable:!0,type:"fraction"}}},speed:1e3,loop:!1,pagination:{el:".section-act__slider .swiper-pagination",clickable:!0,type:"progressbar"},navigation:{nextEl:".section-act__slider--main .swiper-button-next",prevEl:".section-act__slider--main .swiper-button-prev"},thumbs:{swiper:o},on:{progress(t){t.slides.forEach(e=>{var o=(e.progress||0)*(.9*t.width);isNaN(o)||(e=e.querySelector(".swiper-box-img"))&&(e.style.transform=`translate3d(${o}px, 0, 0)`)})},touchStart(e){e.slides.forEach(e=>{e.style.transition=""})},setTransition(e,o){let t="cubic-bezier(0.25, 0.1, 0.25, 1)";e.slides.forEach(e=>{e.style.transition=o+"ms "+t;e=e.querySelector(".swiper-box-img");e&&(e.style.transition=o+"ms "+t)})}}});$(".swiper-button-prev-mobile").on("click",function(){e.slidePrev()}),$(".swiper-button-next-mobile").on("click",function(){e.slideNext()})}}function swiperOffer(){document.querySelector(".swiper-offer")&&new Swiper(".swiper-offer",{spaceBetween:24,slidesPerView:1.25,speed:1e3,navigation:{nextEl:".section-offer__slider .swiper-button-next",prevEl:".section-offer__slider .swiper-button-prev"},pagination:{el:".section-offer__slider .swiper-pagination",type:"progressbar"},slidesOffsetAfter:24,slidesOffsetBefore:24,breakpoints:{991:{slidesPerView:3,spaceBetween:40,slidesOffsetAfter:0,slidesOffsetBefore:0}}})}function animationLineMap(){var e,o;$("#maskRect").length<1||(gsap.registerPlugin(ScrollTrigger),o=(e=document.querySelector(".svg-container")).classList.contains("not-banner"),gsap.to("#maskRect",{height:5989,ease:"none",scrollTrigger:{trigger:e,start:o?"top top":"top center",end:"bottom bottom",scrub:!0}}))}function scrollHeader(){ScrollTrigger.refresh(),ScrollTrigger.create({start:"top top",end:99999,paused:!0,onUpdate:e=>{var o=document.querySelector("header"),t=document.querySelector(".nav-tabs");0===window.scrollY&&o.classList.remove("scrolled"),1===e.direction?(document.querySelector(".btn-hamburger").classList.contains("change")||o.classList.add("scrolled"),t&&t.classList.add("scrolled")):(o.classList.remove("scrolled"),t&&t.classList.remove("scrolled")),1===e.direction?$(".cta-group").addClass("hide"):$(".cta-group").removeClass("hide")}})}function animationArt(){document.querySelectorAll(".animation-art").forEach(e=>{gsap.to(e,{yPercent:20,ease:"none",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:!0}})}),document.querySelectorAll(".animation-art-reverse").forEach(e=>{gsap.to(e,{yPercent:50,ease:"none",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:!0}})})}function headerMenu(){let e=$(".btn-hamburger"),o=$(".header-sub-menu");var t=$(".sub-menu-overlay");let a=gsap.timeline({paused:!0}),r=gsap.timeline({paused:!0});a.from(".header-sub-menu .sub-menu-container .sub-menu > ul > li",{opacity:0,y:20,stagger:.1,duration:.3,ease:"power2.out"}),r.from(".sub-menu-container .sub-menu > ul > li.menu-item-has-children li",{opacity:0,y:20,stagger:.1,duration:.3,ease:"power2.out"}),e.on("click",function(){o.toggleClass("show"),e.toggleClass("change"),o.hasClass("show")?(a.restart(),$("body").addClass("overflow-hidden")):(a.reverse(),$("body").removeClass("overflow-hidden"))}),t.on("click",function(){a.reverse(),e.removeClass("change"),o.removeClass("show"),$("body").removeClass("overflow-hidden")}),992<$(window).width()||$("header .menu-item-has-children .return").on("click",function(e){e.preventDefault(),a.restart(),r.reverse(),$(".menu-item-has-children.open").removeClass("open")})}function toggleDropdown(){let i=jQuery(".dropdown-custom");i.each(function(){let o=jQuery(this);var e=o.find(".dropdown-custom__btn");let t=o.find(".dropdown-custom__menu");var a=o.find(".dropdown-custom__item");let r=o.find(".dropdown-custom__text");function n(o){i.each(function(){var e=jQuery(this).find(".dropdown-custom__menu");o&&jQuery(this).is(o)||e.removeClass("dropdown--active")})}e.on("click",function(e){e.stopPropagation(),n(o),t.toggleClass("dropdown--active");e=e.clientY;jQuery(window).height()/2<e?t.removeClass("dropdown-up"):t.addClass("dropdown-up")}),jQuery(document).on("click",function(){n()}),a.on("click",function(e){e.stopPropagation();var e=jQuery(this),o=r.text();r.text(e.text()),e.hasClass("language__item")&&e.text(o),n()})})}function modalBooking(){if(!($("#modalBooking").length<1)){var o=document.querySelector('#modalBooking [name="booking-startday"]');if(o){let e=new Lightpick({field:o,singleDate:!0,numberOfMonths:1,format:"DD/MM/YYYY",minDate:moment(),onSelect:function(e){try{e?($('#modalBooking [name="booking-startday"]').val(e.format("DD/MM/YYYY")),$("#modalBooking .field.date .field-border-bottom").removeClass("error")):console.warn("start is undefined in onSelect")}catch(e){console.error("Error in Lightpick onSelect:",e)}}});$("#modalBooking form").on("submit",function(e){e.preventDefault();let t=!0,o=$(this);$("#modalBooking .error").removeClass("error");[{name:"booking-startday",errorField:"#modalBooking .field.date .field-border-bottom"},{name:"booking-adult",errorField:"#modalBooking .adult.field-border-bottom"},{name:"booking-name",errorField:"#modalBooking .name.field-border-bottom"},{name:"booking-phone",errorField:"#modalBooking .phone.field-border-bottom"}].forEach(e=>{var o=$(`#modalBooking [name="${e.name}"]`);o.val()&&""!==o.val().trim()||($(e.errorField).addClass("error"),t=!1)});var e=$('#modalBooking [name="booking-phone"]').val();e&&!/^[0-9]{10,11}$/.test(e)&&($("#modalBooking .phone.field-border-bottom").addClass("error"),t=!1),t&&(e={action:"submit_booking_form",booking_startday:o.find('[name="booking-startday"]').val(),booking_adult:o.find('[name="booking-adult"]').val(),booking_child:o.find('[name="booking-child"]').val(),booking_name:o.find('[name="booking-name"]').val(),booking_phone:o.find('[name="booking-phone"]').val(),booking_email:o.find('[name="booking-email"]').val(),booking_message:o.find('[name="booking-message"]').val(),data_id:o.find('[name="data-id"]').val(),data_posttype:o.find('[name="data-posttype"]').val()},$.ajax({url:ajaxUrl,type:"POST",data:e,beforeSend:function(){o.find("button[type='submit']").addClass("aloading")},success:function(e){e.success?(o.find("button[type='submit']").removeClass("aloading"),console.log("Đặt chỗ thành công:",e.data),$("form")[0].reset(),$("#modalBooking").modal("hide"),$("#modalBookingSuccess").modal("show")):console.error("Lỗi xử lý từ server:",e.data)},error:function(e,o,t){console.error("Lỗi AJAX:",o,t)}}),$(".error").removeClass("error"))}),$('#modalBooking [name="booking-adult"], #modalBooking [name="booking-name"], #modalBooking [name="booking-phone"]').on("input",function(){var e=$(this).closest(".field-border-bottom");e.hasClass("error")&&e.removeClass("error")}),$('#modalBooking [name="booking-startday"]').on("click",function(){e.show()})}else console.error('Input field [name="booking-startday"] not found')}}function magicCursor(){if(!($(".magic-cursor").length<1)){var a=document.querySelector(".magic-cursor");gsap.set(a,{xPercent:-50,yPercent:-50});let o,t;window.addEventListener("mousemove",e=>{o=e.clientX,t=e.clientY,gsap.to(a,{x:o,y:t,duration:.1})});var e=document.querySelectorAll("[data-cursor-text]"),r=document.querySelector(".magic-cursor .cursor"),n=document.querySelector(".magic-cursor .cursor .text");e.forEach(o=>{o.addEventListener("mouseenter",()=>{var e=o.getAttribute("data-cursor-text");n.innerHTML=`<span class="b2-regular color-white">${e}</span>`,r.classList.add("show-text")}),o.addEventListener("mouseleave",()=>{n.innerHTML="",r.classList.remove("show-text")})})}}function detailSlider(){let d=document.querySelector(".image-with-text .detail-slider");if(d){var e=document.querySelector(".image-with-text");if(e){let c=document.querySelector(".image-with-text .detail-slider__arrows");if(c){let n=new Swiper(d,{loop:!1,speed:1500,watchSlidesProgress:!0,mousewheel:!1,keyboard:!1,allowTouchMove:!0,autoplay:!1,pagination:{el:".image-with-text .swiper-pagination",type:"progressbar"},breakpoints:{991:{allowTouchMove:!1}},on:{progress(t){t.slides.forEach(e=>{var o=(e.progress||0)*(.9*t.width);isNaN(o)||(e=e.querySelector(".detail-slider__image"))&&(e.style.transform=`translate3d(${o}px, 0, 0)`)})},touchStart(e){e.slides.forEach(e=>{e.style.transition=""})},setTransition(e,o){let t="cubic-bezier(0.25, 0.1, 0.25, 1)";e.slides.forEach(e=>{e.style.transition=o+"ms "+t;e=e.querySelector(".detail-slider__image");e&&(e.style.transition=o+"ms "+t)})}}}),s=null;e.addEventListener("mousemove",e=>{var o=d.getBoundingClientRect(),t=e.clientX-o.left,e=e.clientY-o.top,a=o.width/2,r=c.offsetWidth,n=c.offsetHeight;s=t,c.style.opacity="1",c.style.transition="opacity 0.3s, transform 0.3s";let i=t-r/2;e-=n/2;let l;i=t<=a-20?(l=180,Math.max(40,Math.min(a-r,i))):20+a<=t?(l=0,Math.max(a,Math.min(o.width-r-40,i))):(l=180-180*((t-(a-20))/40),Math.max(40,Math.min(o.width-r-40,i))),e=Math.max(40,Math.min(o.height-n-40,e)),c.style.left=i+"px",c.style.top=e+"px",c.style.transform=`scale(1) rotate(${l}deg)`,c.style.transition=" transform 0.3s"}),e.addEventListener("mouseleave",()=>{c.style.opacity="0",c.style.transform="scale(0)",c.style.transition="opacity 0.3s, transform 0.3s",s=null}),c.addEventListener("click",e=>{var o=d.getBoundingClientRect(),t=o.width/2,a=n.activeIndex,r=n.slides.length;(null!==s?s:e.clientX-o.left)<=t?0<a?(n.slidePrev(),console.log("slidePrev called")):console.log("Cannot slidePrev: at first slide"):a<r-1?(n.slideNext(),console.log("slideNext called")):console.log("Cannot slideNext: at last slide")})}else console.warn("Swiper button (.image-with-text .detail-slider__arrows) not found")}else console.warn("Parent container (.image-with-text) not found")}else console.warn("Detail slider (.image-with-text .detail-slider) not found")}function loading(){document.querySelector(".loading")&&(document.querySelector(".loading").classList.add("loading-out"),document.body.classList.remove("scroll-hidden"),setTimeout(()=>{fadeTextPageDetail()},1e3),setTimeout(()=>{document.querySelectorAll(".loading").forEach(e=>{e.style.display="none"})},1500))}function updateSvgHeight(){var e,o=document.querySelector(".svg-container svg"),t=document.querySelector("footer");o&&!o.classList.contains("not-update")&&t&&(t=document.body.clientHeight-(e=window.innerHeight)-(t.clientHeight-140),console.log(t),0<t?o.setAttribute("height",t):o.setAttribute("height",e))}function gallery(){if(console.log("animated-thumb"),document.querySelector(".animated-thumb")){let e=lightGallery(document.querySelector(".animated-thumb"),{selector:".thumb-img",thumbnail:!0,download:!1,height:"100%",width:"100%",iframeMaxWidth:"100%",subHtmlSelectorRelative:!0,showCloseIcon:!0,mobileSettings:{controls:!0,showCloseIcon:!0,download:!1}}),o=null,t=(document.querySelector(".animated-thumb").addEventListener("lgAfterOpen",function(){o=setInterval(()=>{e.goToNextSlide()},5e3)}),document.querySelector(".animated-thumb").addEventListener("lgAfterClose",function(){clearInterval(o)}),document.querySelector(".lg-prev")),a=document.querySelector(".lg-next"),r=document.querySelector(".lg-container");var i=document.querySelector(".lg-close");let n=!1;r.addEventListener("mousemove",e=>{var o;n||(o=(o=r.getBoundingClientRect()).left+o.width/2,t.style.left=e.clientX+"px",t.style.top=e.clientY+"px",a.style.left=e.clientX+"px",a.style.top=e.clientY+"px",e.clientX<o?(t.style.display="block",a.style.display="none"):(t.style.display="none",a.style.display="block",a.style.transform="scale(1) translate(-200%, -150%)"))}),r.addEventListener("mouseleave",()=>{t.style.display="none",a.style.display="none"}),i.addEventListener("mouseenter",()=>{n=!0,a.style.transform="scale(0) translate(-200%, -150%)"}),i.addEventListener("mouseleave",()=>{n=!1,a.style.transform="scale(1) translate(-200%, -150%)"})}}function fadeTextFooter(){gsap.set("data-text-footer",{opacity:0,y:20});var e=gsap.timeline({paused:!0});return e.fromTo("[data-text-footer]",{opacity:0,y:20},{opacity:1,y:0,stagger:.05,duration:.6,ease:"power2.out"}),ScrollTrigger.create({trigger:"footer",start:"top 80%",animation:e,toggleActions:"play none none none"}),e}function fadeTextPageDetail(){let t=gsap.timeline();isSafari?gsap.utils.toArray("[data-effect-auto]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 75%",end:"bottom 75%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}):0<(e=document.querySelectorAll("[data-splitting][data-effect-auto]")).length&&e.forEach(e=>{e=e.querySelectorAll(".char");t.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,stagger:.05,duration:.3,ease:"sine.out"})});var e=gsap.utils.toArray("[data-fade-auto]"),e=(0<e.length&&e.forEach(e=>{var o=parseFloat(e.dataset.delay)||0;t.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"sine.out",delay:o})}),document.querySelectorAll("[data-fade-desc-auto]")),e=(0<e.length&&e.forEach(e=>{var o=parseFloat(e.dataset.delay)||500;let t=gsap.timeline({paused:!0});t.fromTo(e,{y:"10%",opacity:0},{y:"0%",opacity:1,duration:.8,ease:"power2.out"}),setTimeout(()=>{t.play()},o)}),gsap.utils.toArray("[data-fade-auto-button]")),e=(0<e.length&&e.forEach(e=>{t.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,duration:.2,ease:"none"})}),gsap.utils.toArray("[data-fade-auto-bottom]"));0<e.length&&e.forEach(e=>{t.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"sine.out",stagger:.1})})}function contactForm(){if(!($(".contact-form").length<1)){let a=$("#contact-form"),t=a.find("input[name='name']"),r=a.find("input[name='email']"),n=a.find("input[type='tel']"),i=a.find("textarea[name='message']"),l=$("#contact_checkbox"),s=a.find("button[type='submit']");function e(){t.val().trim(),r.val().trim(),n.val().trim(),l.is(":checked")}t.on("input",e),r.on("input",e),n.on("input",e),l.on("change",e),e(),a.on("submit",function(e){e.preventDefault(),a.find(".error-message").remove(),a.find("input, textarea").removeClass("error");let o=!0;t.val().trim()||(t.addClass("error"),o=!1),r.val().trim()||(r.addClass("error"),o=!1),n.val().trim()||(n.addClass("error"),o=!1),o&&$.ajax({type:"POST",url:ajaxUrl,data:{action:"submit_contact_form",name:t.val().trim(),email:r.val().trim(),phone:n.val().trim(),messageNote:i.val().trim(),getNewletter:l.is(":checked")?"true":"false"},beforeSend:function(){$(".contact-message").remove(),s.addClass("aloading")},success:function(e){$(".contact-message").remove(),s.removeClass("aloading"),a[0].reset(),$("#modalBookingSuccess").modal("show")},error:function(e,o,t){console.error("Lỗi khi gửi form:",t),$(".contact-message").remove(),a.append('<span class="contact-message" style="color: red;">Có lỗi xảy ra, vui lòng thử lại sau.</span>')}})})}}function getNewletter(){$("#form-newletter").on("submit",function(e){e.preventDefault();let o=$(this);var t,e=o.find("input[type='email']");e.removeClass("error"),o.siblings("span").remove(),e.length?(t=e.val()?e.val().trim():"")?$.ajax({type:"POST",url:ajaxUrl,data:{action:"costamigo_receive_newletter",email:t},beforeSend:function(){console.log("Đang gửi dữ liệu...")},success:function(e){o[0].reset(),$("#modalNewsletterSuccess").modal("show")},error:function(e,o,t){console.error("Lỗi khi gửi form:",t),alert("Có lỗi xảy ra, vui lòng thử lại sau.")}}):e.addClass("error"):console.error("Không tìm thấy input email trong form.")})}function swiperBanner(){if(!($(".banner-slider").length<1)){let s=document.querySelector(".banner-slider"),n=new Swiper(".banner-slider",{loop:!1,speed:1500,watchSlidesProgress:!0,mousewheel:!1,keyboard:!1,allowTouchMove:!0,autoplay:!0,breakpoints:{991:{allowTouchMove:!1,autoplay:!1}},on:{progress(t){t.slides.forEach(e=>{var o=(e.progress||0)*(.9*t.width);isNaN(o)||(e=e.querySelector(".banner-slider-img"))&&(e.style.transform=`translate3d(${o}px, 0, 0)`)})},touchStart(e){e.slides.forEach(e=>{e.style.transition=""})},setTransition(e,o){let t="cubic-bezier(0.25, 0.1, 0.25, 1)";e.slides.forEach(e=>{e.style.transition=o+"ms "+t;e=e.querySelector(".banner-slider-img");e&&(e.style.transition=o+"ms "+t)})}}}),c=document.querySelector(".banner-slider .swiper-btn-custom");var e=document.querySelector(".banner-slider");let d=null;e.addEventListener("mousemove",e=>{var o=s.getBoundingClientRect(),t=e.clientX-o.left,e=e.clientY-o.top,a=o.width/2,r=c.offsetWidth,n=c.offsetHeight;d=t,c.style.opacity="1",c.style.transition="opacity 0.3s, transform 0.3s";let i=t-r/2;e-=n/2;let l;i=t<=a-20?(l=180,Math.max(40,Math.min(a-r,i))):20+a<=t?(l=0,Math.max(a,Math.min(o.width-r-40,i))):(l=180-180*((t-(a-20))/40),Math.max(40,Math.min(o.width-r-40,i))),e=Math.max(40,Math.min(o.height-n-40,e)),c.style.left=i+"px",c.style.top=e+"px",c.style.transform=`scale(1) rotate(${l}deg)`,c.style.transition=" transform 0.3s"}),e.addEventListener("mouseleave",()=>{c.style.opacity="0",c.style.transform="scale(0)",c.style.transition="opacity 0.3s, transform 0.3s",d=null}),c.addEventListener("click",e=>{var o=s.getBoundingClientRect(),t=o.width/2,a=n.activeIndex,r=n.slides.length;(null!==d?d:e.clientX-o.left)<=t?0<a?(n.slidePrev(),console.log("slidePrev called")):console.log("Cannot slidePrev: at first slide"):a<r-1?(n.slideNext(),console.log("slideNext called")):console.log("Cannot slideNext: at last slide")})}}function accomodationnFilter(){function e(){gsap.to(".accomodation-list .nav-tabs",{opacity:1,y:0,duration:.3,ease:"none"})}function o(){gsap.to(".accomodation-list .nav-tabs",{opacity:0,y:50,duration:.3,ease:"none"})}$(".accomodation-list").length<1||($(".accomodation-list .nav-tabs .nav-link").on("click",function(e){e.preventDefault(),fadeTextFooter().play()}),gsap.set(".accomodation-list .nav-tabs",{opacity:0,y:50}),ScrollTrigger.create({trigger:".accomodation-list",start:"top 60%",end:"bottom bottom",onEnter:e,onEnterBack:e,onLeave:o,onLeaveBack:o}))}function zoomInBanner(){gsap.registerPlugin(ScrollTrigger);var e=document.querySelector(".section-banner__wrapper picture img");gsap.set(e,{scale:1.2}),gsap.to(e,{scale:1,duration:1,ease:"none",scrollTrigger:{trigger:".section-banner",start:"top top",end:"bottom top",scrub:1}})}function animation(){document.querySelectorAll(".image-zoom-in").forEach(e=>{var o=e.querySelector("img");o&&(gsap.set(o,{scale:1.5}),gsap.to(o,{scale:1,ease:"none",scrollTrigger:{trigger:e,start:"top 80%",end:"bottom top",scrub:!0}}))})}function accomodationForm(){if(!($("#modalBookingRoom").length<1)){let o=$(".btn-modal-booking-room");var r=document.getElementById("modalBookingRoom"),n=o.data("id");n&&$("#modalBookingRoom").find('[name="data-id"]').val(n);let t=new bootstrap.Modal(r);n=$("#modalBookingRoom form"),r=(o.on("click",function(e){e.preventDefault(),o.hasClass("single")&&(e=o.data("id"),$(`#modalBookingRoom .dropdown-custom__item[data-id='${e}']`).trigger("click")),t.show()}),$("#modalBookingRoom .dropdown-custom__item"));let a=$("#modalBookingRoom input[name='data-id']");r.on("click",function(){var e=$(this).data("id");a.val(e)});r=document.querySelector('#modalBookingRoom [name="booking-room-startday"]');if(r){var i=document.querySelector('#modalBookingRoom [name="booking-room-endday"]');if(i){let e=new Lightpick({field:r,secondField:i,singleDate:!1,numberOfMonths:1,format:"DD/MM/YYYY",minDate:moment(),onSelect:function(e,o){try{e&&o?($('#modalBookingRoom [name="booking-room-startday"]').val(e.format("DD/MM/YYYY")),$('#modalBookingRoom [name="booking-room-endday"]').val(o.format("DD/MM/YYYY")),$("#modalBookingRoom .field.date .field-border-bottom").removeClass("error")):console.warn("start hoặc end is undefined in onSelect")}catch(e){console.error("Error in Lightpick onSelect:",e)}}});n.on("submit",function(e){e.preventDefault();let t=!0,o=$(this);$("#modalBookingRoom .error").removeClass("error");[{name:"booking-room-startday",errorField:"#modalBookingRoom .field.date .field-border-bottom"},{name:"booking-adult",errorField:"#modalBookingRoom .adult.field-border-bottom"},{name:"booking-name",errorField:"#modalBookingRoom .name.field-border-bottom"},{name:"booking-phone",errorField:"#modalBookingRoom .phone.field-border-bottom"}].forEach(e=>{var o=$(`#modalBookingRoom [name="${e.name}"]`);o.val()&&""!==o.val().trim()||($(e.errorField).addClass("error"),t=!1)});var e=$('#modalBookingRoom [name="booking-phone"]').val();e&&!/^[0-9]{10,11}$/.test(e)&&($("#modalBookingRoom .phone.field-border-bottom").addClass("error"),t=!1),t&&(e={action:"submit_booking_accommodation_form",booking_startday:o.find('[name="booking-room-startday"]').val(),booking_endday:o.find('[name="booking-room-endday"]').val(),booking_adult:o.find('[name="booking-adult"]').val(),booking_child:o.find('[name="booking-child"]').val(),booking_name:o.find('[name="booking-name"]').val(),booking_phone:o.find('[name="booking-phone"]').val(),booking_email:o.find('[name="booking-email"]').val(),booking_message:o.find('[name="booking-message"]').val(),data_id:o.find('[name="data-id"]').val()},$.ajax({url:ajaxUrl,type:"POST",data:e,beforeSend:function(){o.find("button[type='submit']").addClass("aloading")},success:function(e){e.success?(o.find("button[type='submit']").removeClass("aloading"),console.log("Đặt chỗ thành công:",e.data),$("form")[0].reset(),$("#modalBookingRoom").modal("hide"),$("#modalBookingSuccess").modal("show")):console.error("Lỗi xử lý từ server:",e.data)},error:function(e,o,t){console.error("Lỗi AJAX:",o,t),console.log("Response text:",e.responseText)}}),$(".error").removeClass("error"))}),$('#modalBookingRoom [name="booking-adult"],#modalBookingRoom [name="booking-name"],#modalBookingRoom [name="booking-phone"]').on("input",function(){var e=$(this).closest(".field-border-bottom");e.hasClass("error")&&e.removeClass("error")}),$('#modalBookingRoom [name="booking-room-startday"], #modalBookingRoom [name="booking-room-endday"]').on("click",function(){e.show()})}else console.error('Input field [name="booking-room-endday"] not found')}else console.error('Input field [name="booking-room-startday"] not found')}}isSafari||Splitting(),$(window).on("DOMContentLoaded",function(){setTimeout(()=>{loading()},2e3)});let init=()=>{gsap.registerPlugin(ScrollTrigger),zoomInBanner(),updateSvgHeight(),fadeTextFooter(),headerMenu(),scrollHeader(),animationArt(),sectionSlider(),animationMaskCentral(),swiperOffer(),animationText(),imgWithText(),swiperRestaurant(),toggleDropdown(),gallery(),swiperBanner(),animationLineMap(),swiperAct(),magicCursor(),detailSlider(),modalBooking(),contactForm(),getNewletter(),accomodationnFilter(),animation(),accomodationForm(),ScrollTrigger.refresh()};togglePlayMusic(),preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});