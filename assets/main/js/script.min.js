import{preloadImages}from"../../libs/utils.js";let lenis;function togglePlayMusic(){let t=$("header .btn-music"),o=$("#player")[0];t.on("click",function(e){if(e.preventDefault(),t.toggleClass("pause"),o)try{o.paused?o.play().catch(e=>{console.error("Lỗi phát nhạc:",e)}):o.pause()}catch(e){console.error("Lỗi điều khiển âm thanh:",e)}else console.error("Không tìm thấy phần tử audio")})}function sectionSlider(){$(".section-slider").length<1||document.querySelectorAll(".tab-content .tab-pane").forEach(e=>{var t=e.querySelector(".slider-swiper-content"),o=e.querySelector(".main-slider"),e=e.querySelector(".swiper-pagination");let n=new Swiper(t,{loop:!1,effect:"fade",allowTouchMove:!1});new Swiper(o,{loop:!0,effect:"fade",autoplay:{delay:5e3,disableOnInteraction:!1},pagination:{el:e,clickable:!0,renderBullet:function(e,t){return`
            <button class="${t}">
              <svg class="progress" width="41" height="41"><circle class="circle-origin" r="20.5" cx="20.5" cy="20.5"></circle></svg>
              <span>${e+1}</span>
            </button>`}},on:{slideChange:function(){var e=this.realIndex;n.slideTo(e)}}})})}function imgWithText(){$(".image-with-text").length<1||(gsap.registerPlugin(ScrollTrigger),gsap.to(".mask.top",{y:"-100%",duration:1.5,ease:"power2.out",scrollTrigger:{trigger:".image-with-text",start:"top top",toggleActions:"play none none none"}}),gsap.to(".mask.bottom",{y:"100%",duration:1.5,ease:"power2.out",scrollTrigger:{trigger:".image-with-text",start:"top top",toggleActions:"play none none none"}}))}function animationMaskCentral(){document.querySelectorAll(".animation-image").forEach(e=>{gsap.to(e,{scrollTrigger:{trigger:e,start:"top 50%",end:"bottom 50%",onEnter:()=>e.classList.add("show")}})})}function animationText(){document.querySelectorAll("[data-splitting]").forEach(e=>{let t=e.querySelectorAll(".char"),o=gsap.timeline({paused:!0}).to(t,{color:"red",stagger:.05,duration:.2});e.addEventListener("mouseenter",()=>{o.restart()}),e.addEventListener("mouseleave",()=>{gsap.to(t,{color:"black",stagger:.05,duration:.2})})})}function swiperRestaurant(){var o=new Swiper(".swiper-restaurant",{effect:"fade",slidesPerView:"auto",centeredSlides:!0}),e=document.querySelectorAll(".section-restaurant__content--title a");let n=e[0];n&&n.classList.add("active"),e.forEach((e,t)=>{e.addEventListener("mouseover",function(){o.slideTo(t),n&&n.classList.remove("active"),e.classList.add("active"),n=e})})}Splitting();let init=()=>{gsap.registerPlugin(ScrollTrigger),sectionSlider(),animationMaskCentral(),animationText(),imgWithText(),swiperRestaurant(),togglePlayMusic()};preloadImages("img").then(()=>{init()}),$(window).on("beforeunload",function(){$(window).scrollTop(0)});