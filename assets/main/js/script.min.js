import { preloadImages } from "../../libs/utils.js";
let lenis;
function sectionSlider() {
  document.querySelectorAll(".swiper-slide"),
    new Swiper(".swiper", {
      loop: "infinite",
      effect: "fade",
      autoplay: { delay: 5e3, disableOnInteraction: !1 },
      pagination: {
        el: ".swiper-pagination",
        clickable: !0,
        renderBullet: function (e, t) {
          return `
          <button class="${t}">
            <svg class="progress" width="41" height="41"><circle class="circle-origin" r="20" cx="20.5" cy="20.5"></circle></svg>
            <span>${e + 1}</span>
          </button>`;
        }
      }
    });
}
function animationMaskCentral() {
  document.querySelectorAll(".animation-image").forEach((e) => {
    gsap.to(e, {
      scrollTrigger: {
        trigger: e,
        start: "top 50%",
        end: "bottom 50%",
        onEnter: () => e.classList.add("show"),
        markers: !0
      }
    });
  });
}
function animationText() {
  document.querySelectorAll("[data-splitting]").forEach((e) => {
    let t = e.querySelectorAll(".char"),
      i = gsap
        .timeline({ paused: !0 })
        .to(t, { color: "red", stagger: 0.05, duration: 0.2 });
    e.addEventListener("mouseenter", () => {
      i.restart();
    }),
      e.addEventListener("mouseleave", () => {
        gsap.to(t, { color: "black", stagger: 0.05, duration: 0.2 });
      });
  });
}
Splitting();
let init = () => {
  gsap.registerPlugin(ScrollTrigger),
    sectionSlider(),
    animationMaskCentral(),
    animationText();
};
preloadImages("img").then(() => {
  init();
}),
  $(window).on("beforeunload", function () {
    $(window).scrollTop(0);
  });
