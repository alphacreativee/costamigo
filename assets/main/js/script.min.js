import{preloadImages}from"../../libs/utils.js";let lenis,isSafari=-1<navigator.userAgent.indexOf("Safari")&&-1===navigator.userAgent.indexOf("Chrome");function togglePlayMusic(){let t=$("header .btn-music"),o=$("#player")[0];o?t.on("click",function(e){e.preventDefault(),t.toggleClass("pause");try{o.paused?(o.muted=!1,o.play().catch(e=>{console.error("Lỗi phát nhạc:",e)})):o.pause()}catch(e){console.error("Lỗi điều khiển âm thanh:",e)}}):console.error("Không tìm thấy phần tử audio")}function sectionSlider(){$(".section-slider").length<1||document.querySelectorAll(".tab-content .tab-pane").forEach(e=>{var t=e.querySelector(".slider-swiper-content");let c=e.querySelector(".main-slider");var o=e.querySelector(".swiper-pagination");let d=e.querySelector(".swiper-btn-custom");var a=e.querySelector(".swiper-button-next"),e=e.querySelector(".swiper-button-prev");if(t&&c&&o&&d){var i=new Swiper(t,{loop:!1,effect:"fade",allowTouchMove:!1,slidesPerView:1});let r=new Swiper(c,{effect:"fade",loop:!1,slidesPerView:1,pagination:{el:o,clickable:!0,type:"progressbar"},navigation:{nextEl:a,prevEl:e},breakpoints:{991:{navigation:{nextEl:!1,prevEl:!1},pagination:{el:o,clickable:!0,type:"fraction"}}},thumbs:{swiper:i}});if(991<document.documentElement.clientWidth){let s=0;c.addEventListener("mousemove",e=>{var t=c.getBoundingClientRect(),o=e.clientX-t.left,e=e.clientY-t.top,r=t.width/2,a=d.offsetWidth,i=d.offsetHeight;s=o,d.style.opacity="1",d.style.transform="scale(1)";let n=o-a/2;e-=i/2;let l;n=o<=r-50?(l=180,Math.max(-0,Math.min(r-a,n))):50+r<=o?(l=360,Math.max(r,Math.min(t.width-a+0,n))):(l=180+180*((o-(r-50))/100),Math.max(-0,Math.min(t.width-a+0,n))),e=Math.max(-0,Math.min(t.height-i+0,e)),d.style.left=n+"px",d.style.top=e+"px",d.style.transform=`scale(1) rotate(${l}deg)`}),d.addEventListener("click",e=>{var t=c.getBoundingClientRect(),t=t.width/2,e=(e.clientX,r.activeIndex),o=(console.log(e),r.slides.length);s<=t?0<e?(r.slidePrev(),console.log("slidePrev called")):console.log("Cannot slidePrev: at first slide"):e<o-1?(r.slideNext(),console.log("slideNext called")):console.log("Cannot slideNext: at last slide")}),c.addEventListener("mouseleave",()=>{d.style.opacity="0",d.style.transform="scale(0)"})}}else console.error("Missing required elements:",{contentSwiperEl:t,mainSwiperEl:c,paginationEl:o,swiperButton:d})})}function imgWithText(){$(".image-with-text").length<1||(gsap.registerPlugin(ScrollTrigger),$(".image-with-text").each(function(){gsap.to($(this).find(".content-box "),{yPercent:-10,ease:"none",scrollTrigger:{trigger:$(this).find(".content-box"),start:"top 30%",end:"bottom top",scrub:!0}})}),document.querySelectorAll(".image-with-text").forEach(a=>{var e=a.querySelector(".section-wrapper"),t=a.querySelector(".section-wrapper img");e&&t&&(gsap.fromTo(e,{clipPath:"inset(0% 0% 0% 0%)"},{scrollTrigger:{trigger:a,start:"top 70%",end:"bottom 70%"},clipPath:()=>{var e=window.innerWidth;let t=e-32;var o=(e-(t=991<e||767<e?e-80:e-32))/2/e*100,r=a.offsetHeight,e=(r-(991<e?r-100:r))/2/r*100;return`inset(${e}% ${o}% ${e}% ${o}%)`},duration:1,ease:"power2.out"}),gsap.fromTo(t,{scale:1},{scrollTrigger:{trigger:e,start:"top 70%",end:"bottom 70%"},scale:1.1,duration:1,ease:"power2.out"}))}))}function animationMaskCentral(){document.querySelectorAll(".animation-image").forEach(e=>{gsap.to(e,{scrollTrigger:{trigger:e,start:"top 70%",end:"bottom 70%",onEnter:()=>e.classList.add("show")}})});let e=document.querySelectorAll(".animation-image-banner");window.addEventListener("load",()=>{setTimeout(()=>{e.forEach(e=>{e.classList.add("show")})},300)})}function animationText(){gsap.registerPlugin(ScrollTrigger);var e=document.querySelectorAll("[data-splitting][data-effect-one]"),t=document.querySelectorAll("[data-splitting][data-effect-three]");e.forEach(e=>{let t=e.querySelectorAll(".char"),o=window.getComputedStyle(t[0]).color||"black";var r=getComputedStyle(e).getPropertyValue("--hover-color")||"red";let a=gsap.timeline({paused:!0}).to(t,{color:r,stagger:.05,duration:.2});e.addEventListener("mouseenter",()=>{a.restart()}),e.addEventListener("mouseleave",()=>{gsap.to(t,{color:o,stagger:.05,duration:.2})})}),isSafari?gsap.utils.toArray("[data-effect-two]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 75%",end:"bottom 75%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}):document.querySelectorAll("[data-splitting][data-effect-two]").forEach(e=>{var t=e.querySelectorAll(".char");gsap.fromTo(t,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,stagger:.05,scrollTrigger:{trigger:e,start:"top 60%",end:"bottom 60%"}})}),t.forEach(e=>{var t=e.querySelectorAll(".char");gsap.fromTo(t,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,stagger:.05,scrollTrigger:{trigger:e,start:"top 40%",end:"bottom 40%"}})}),gsap.utils.toArray("[data-fade-in]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 75%",end:"bottom 75%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}),gsap.utils.toArray("[data-fade-in-v2]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 70%",end:"bottom 70%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}),gsap.utils.toArray("[data-fade-in-v3]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 90%",end:"bottom 90%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}),gsap.utils.toArray("[data-fade-in-v4]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 60%",end:"bottom 60%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}),document.querySelectorAll("[data-fade-desc]").forEach((o,e)=>{let r=o.dataset.start||"50%";new SplitType(o,{types:"lines, words",lineClass:"split-line",wordClass:"split-word"}).lines.forEach((e,t)=>{gsap.from(e.querySelectorAll(".split-word"),{y:"100%",duration:.5,ease:"power2.out",delay:.1*t,scrollTrigger:{trigger:o,start:"top "+r,end:"top "+r,toggleActions:"play none none none"}})})}),document.querySelectorAll("[data-fade-desc-v2]").forEach((o,e)=>{new SplitType(o,{types:"lines, words",lineClass:"split-line",wordClass:"split-word"}).lines.forEach((e,t)=>{gsap.from(e.querySelectorAll(".split-word"),{y:"100%",duration:.5,ease:"power2.out",delay:.1*t,scrollTrigger:{trigger:o,start:"top 70%",end:"top 70%",toggleActions:"play none none none"}})})})}function swiperRestaurant(){if(document.querySelector(".swiper-restaurant")){var r=new Swiper(".swiper-restaurant",{effect:"fade",slidesPerView:"auto",centeredSlides:!0}),e=document.querySelectorAll(".section-restaurant__content--title a");let o=e[0];o&&o.classList.add("active"),e.forEach((e,t)=>{e.addEventListener("mouseover",function(){r.slideTo(t),o&&o.classList.remove("active"),e.classList.add("active"),o=e})}),document.documentElement.clientWidth<991&&document.querySelector(".swiper-res-mobile")&&(r=new Swiper(".swiper-res-mobile",{slidesPerView:1.25,spaceBetween:24,slidesOffsetAfter:24,slidesOffsetBefore:24}))}}function swiperAct(){if(document.querySelector(".act-slider")){let c=document.querySelector(".act-slider"),d=c.querySelector(".swiper-btn-act");var e=document.querySelector(".swiper-act-content");if(c&&d&&e){var t=new Swiper(".swiper-act-content",{slidesPerView:1,watchSlidesProgress:!0,watchSlidesVisibility:!0,effect:"fade",fadeEffect:{crossFade:!0},spaceBetween:30,allowTouchMove:!1}),o=window.innerWidth<991;let r=new Swiper(".act-slider",{slidesPerView:1,effect:o?"fade":"slide",slidesOffsetAfter:0,breakpoints:{991:{slidesPerView:1.4,slidesOffsetAfter:76,pagination:{el:".section-act__slider .swiper-pagination",clickable:!0,type:"fraction"}}},speed:1e3,loop:!1,pagination:{el:".section-act__slider .swiper-pagination",clickable:!0,type:"progressbar"},navigation:o&&{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},thumbs:{swiper:t},on:{slideChange:function(){console.log("Current slide index:",this.activeIndex,"Total slides:",this.slides.length)}}});if($(".swiper-button-prev-mobile").on("click",function(){r.slidePrev()}),$(".swiper-button-next-mobile").on("click",function(){r.slideNext()}),a(),window.addEventListener("resize",a),!o){let s=0;c.addEventListener("mousemove",e=>{var t=c.getBoundingClientRect(),o=e.clientX-t.left,e=e.clientY-t.top,r=t.width/2,a=d.offsetWidth,i=d.offsetHeight;s=o,d.style.opacity="1",d.style.transform="scale(1)";let n=o-a/2;e-=i/2;let l;n=o<=r-50?(l=180,Math.max(-0,Math.min(r-a,n))):50+r<=o?(l=0,Math.max(r,Math.min(t.width-a+0,n))):(l=180-90*((o-(r-50))/100),Math.max(-0,Math.min(t.width-a+0,n))),e=Math.max(-0,Math.min(t.height-i+0,e)),d.style.left=n+"px",d.style.top=e+"px",d.style.transform=`scale(1) rotate(${l}deg)`}),c.addEventListener("mouseleave",()=>{d.style.opacity="0",d.style.transform="scale(0)"}),d.addEventListener("click",()=>{var e=c.getBoundingClientRect().width/2,t=r.activeIndex,o=r.slides.length;s<=e?0<t?(r.slidePrev(),console.log("slidePrev called")):console.log("Cannot slidePrev: at first slide"):t<o-1?(r.slideNext(),console.log("slideNext called")):console.log("Cannot slideNext: at last slide")})}function a(){991<=window.innerWidth?r.changeLanguageDirection("rtl"):r.changeLanguageDirection("ltr")}}else console.error("Missing required elements:",{container:c,swiperButton:d,swiperActContent:e})}}function swiperOffer(){document.querySelector(".swiper-offer")&&new Swiper(".swiper-offer",{spaceBetween:24,slidesPerView:1.25,navigation:{nextEl:".section-offer__slider .swiper-button-next",prevEl:".section-offer__slider .swiper-button-prev"},pagination:{el:".section-offer__slider .swiper-pagination",type:"progressbar"},slidesOffsetAfter:24,slidesOffsetBefore:24,breakpoints:{991:{slidesPerView:3,spaceBetween:40,slidesOffsetAfter:0,slidesOffsetBefore:0}}})}function animationLineMap(){var e,t;$("#maskRect").length<1||(gsap.registerPlugin(ScrollTrigger),t=(e=document.querySelector(".svg-container")).classList.contains("not-banner"),gsap.to("#maskRect",{height:5989,ease:"none",scrollTrigger:{trigger:e,start:t?"top top":"top center",end:"bottom bottom",scrub:!0}}))}function scrollHeader(){ScrollTrigger.refresh(),ScrollTrigger.create({start:"top top",end:99999,paused:!0,onUpdate:e=>{var t=document.querySelector("header"),o=document.querySelector(".nav-tabs");0===window.scrollY&&(t.classList.remove("scrolled"),console.log("scroll Y 0")),1===e.direction?(document.querySelector(".btn-hamburger").classList.contains("change")||t.classList.add("scrolled"),o&&o.classList.add("scrolled")):(t.classList.remove("scrolled"),o&&o.classList.remove("scrolled")),1===e.direction?$(".cta-group").addClass("hide"):$(".cta-group").removeClass("hide")}})}function animationArt(){document.querySelectorAll(".animation-art").forEach(e=>{gsap.to(e,{yPercent:20,ease:"none",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:!0}})}),document.querySelectorAll(".animation-art-reverse").forEach(e=>{gsap.to(e,{yPercent:25,ease:"none",scrollTrigger:{trigger:e,start:"top bottom",end:"bottom top",scrub:!0}})})}function headerMenu(){let e=$(".btn-hamburger"),t=$(".header-sub-menu");var o=$(".sub-menu-overlay");let r=gsap.timeline({paused:!0});r.from(".sub-menu ul li",{opacity:0,y:20,stagger:.1,duration:.3,ease:"power2.out"}),e.on("click",function(){t.toggleClass("show"),e.toggleClass("change"),t.hasClass("show")?(r.restart(),$("body").addClass("overflow-hidden")):(r.reverse(),$("body").removeClass("overflow-hidden"))}),o.on("click",function(){r.reverse(),e.removeClass("change"),t.removeClass("show"),$("body").removeClass("overflow-hidden")})}function toggleDropdown(){let n=jQuery(".dropdown-custom");n.each(function(){let t=jQuery(this);var e=t.find(".dropdown-custom__btn");let o=t.find(".dropdown-custom__menu");var r=t.find(".dropdown-custom__item");let a=t.find(".dropdown-custom__text");function i(t){n.each(function(){var e=jQuery(this).find(".dropdown-custom__menu");t&&jQuery(this).is(t)||e.removeClass("dropdown--active")})}e.on("click",function(e){e.stopPropagation(),i(t),o.toggleClass("dropdown--active");e=e.clientY;jQuery(window).height()/2<e?o.removeClass("dropdown-up"):o.addClass("dropdown-up")}),jQuery(document).on("click",function(){i()}),r.on("click",function(e){e.stopPropagation();var e=jQuery(this),t=a.text();a.text(e.text()),e.hasClass("language__item")&&e.text(t),i()})})}function modalBooking(){if(!($(".modal-booking").length<1)){var t=document.querySelector('[name="booking-startday"]');if(t){let e=new Lightpick({field:t,singleDate:!0,numberOfMonths:1,format:"DD/MM/YYYY",minDate:moment(),onSelect:function(e){try{e?($('[name="booking-startday"]').val(e.format("DD/MM/YYYY")),$(".field.date .field-border-bottom").removeClass("error")):console.warn("start is undefined in onSelect")}catch(e){console.error("Error in Lightpick onSelect:",e)}}});$("form").on("submit",function(e){e.preventDefault();let o=!0;var e=$(this),t=($(".error").removeClass("error"),[{name:"booking-startday",errorField:".field.date .field-border-bottom"},{name:"booking-adult",errorField:".adult.field-border-bottom"},{name:"booking-name",errorField:".name.field-border-bottom"},{name:"booking-phone",errorField:".phone.field-border-bottom"}].forEach(e=>{var t=$(`[name="${e.name}"]`);t.val()&&""!==t.val().trim()||($(e.errorField).addClass("error"),o=!1)}),$('[name="booking-phone"]').val());t&&!/^[0-9]{10,11}$/.test(t)&&($(".phone.field-border-bottom").addClass("error"),o=!1),o&&(t={action:"submit_booking_form",booking_startday:e.find('[name="booking-startday"]').val(),booking_adult:e.find('[name="booking-adult"]').val(),booking_child:e.find('[name="booking-child"]').val(),booking_name:e.find('[name="booking-name"]').val(),booking_phone:e.find('[name="booking-phone"]').val(),booking_email:e.find('[name="booking-email"]').val(),booking_message:e.find('[name="booking-message"]').val(),data_id:e.find('[name="data-id"]').val(),data_posttype:e.find('[name="data-posttype"]').val()},$.ajax({url:ajaxUrl,type:"POST",data:t,success:function(e){e.success?(console.log("Đặt chỗ thành công:",e.data),$("form")[0].reset(),$("#modalBooking").modal("hide"),$("#modalBookingSuccess").modal("show")):console.error("Lỗi xử lý từ server:",e.data)},error:function(e,t,o){console.error("Lỗi AJAX:",t,o)}}),$(".error").removeClass("error"))}),$('[name="booking-adult"], [name="booking-name"], [name="booking-phone"]').on("input",function(){var e=$(this).closest(".field-border-bottom");e.hasClass("error")&&e.removeClass("error")}),$('[name="booking-startday"]').on("click",function(){e.show()})}else console.error('Input field [name="booking-startday"] not found')}}function magicCursor(){if(!($(".magic-cursor").length<1)){var r=document.querySelector(".magic-cursor");gsap.set(r,{xPercent:-50,yPercent:-50});let t,o;window.addEventListener("mousemove",e=>{t=e.clientX,o=e.clientY,gsap.to(r,{x:t,y:o,duration:.1})});var e=document.querySelectorAll("[data-cursor-text]"),a=document.querySelector(".magic-cursor .cursor"),i=document.querySelector(".magic-cursor .cursor .text");e.forEach(t=>{t.addEventListener("mouseenter",()=>{var e=t.getAttribute("data-cursor-text");i.innerHTML=`<span class="b2-regular color-white">${e}</span>`,a.classList.add("show-text")}),t.addEventListener("mouseleave",()=>{i.innerHTML="",a.classList.remove("show-text")})})}}function detailSlider(){let d=document.querySelector(".image-with-text .detail-slider");if(d){var e=document.querySelector(".image-with-text");if(e){let c=document.querySelector(".image-with-text .detail-slider__arrows");if(c){let i=new Swiper(d,{loop:!1,speed:1500,watchSlidesProgress:!0,mousewheel:!1,keyboard:!1,allowTouchMove:!0,autoplay:!1,pagination:{el:".image-with-text .swiper-pagination",type:"progressbar"},breakpoints:{991:{allowTouchMove:!1}},on:{progress(o){o.slides.forEach(e=>{var t=(e.progress||0)*(.9*o.width);isNaN(t)||(e=e.querySelector(".detail-slider__image"))&&(e.style.transform=`translate3d(${t}px, 0, 0)`)})},touchStart(e){e.slides.forEach(e=>{e.style.transition=""})},setTransition(e,t){let o="cubic-bezier(0.25, 0.1, 0.25, 1)";e.slides.forEach(e=>{e.style.transition=t+"ms "+o;e=e.querySelector(".detail-slider__image");e&&(e.style.transition=t+"ms "+o)})}}}),s=null;e.addEventListener("mousemove",e=>{var t=d.getBoundingClientRect(),o=e.clientX-t.left,e=e.clientY-t.top,r=t.width/2,a=c.offsetWidth,i=c.offsetHeight;s=o,c.style.opacity="1",c.style.transition="opacity 0.3s, transform 0.3s";let n=o-a/2;e-=i/2;let l;n=o<=r-20?(l=180,Math.max(40,Math.min(r-a,n))):20+r<=o?(l=0,Math.max(r,Math.min(t.width-a-40,n))):(l=180-180*((o-(r-20))/40),Math.max(40,Math.min(t.width-a-40,n))),e=Math.max(40,Math.min(t.height-i-40,e)),c.style.left=n+"px",c.style.top=e+"px",c.style.transform=`scale(1) rotate(${l}deg)`,c.style.transition=" transform 0.3s"}),e.addEventListener("mouseleave",()=>{c.style.opacity="0",c.style.transform="scale(0)",c.style.transition="opacity 0.3s, transform 0.3s",s=null}),c.addEventListener("click",e=>{var t=d.getBoundingClientRect(),o=t.width/2,r=i.activeIndex,a=i.slides.length;(null!==s?s:e.clientX-t.left)<=o?0<r?(i.slidePrev(),console.log("slidePrev called")):console.log("Cannot slidePrev: at first slide"):r<a-1?(i.slideNext(),console.log("slideNext called")):console.log("Cannot slideNext: at last slide")})}else console.warn("Swiper button (.image-with-text .detail-slider__arrows) not found")}else console.warn("Parent container (.image-with-text) not found")}else console.warn("Detail slider (.image-with-text .detail-slider) not found")}function loading(){document.querySelector(".loading")&&(document.querySelector(".loading").classList.add("loading-out"),document.body.classList.remove("scroll-hidden"),setTimeout(()=>{fadeTextPageDetail()},1e3),setTimeout(()=>{document.querySelectorAll(".loading").forEach(e=>{e.style.display="none"})},1500))}function updateSvgHeight(){var e,t=document.querySelector(".svg-container svg"),o=document.querySelector("footer");t&&o&&(o=document.body.clientHeight-(e=window.innerHeight)-(o.clientHeight-140),console.log(o),0<o?t.setAttribute("height",o):t.setAttribute("height",e))}function gallery(){if(console.log("animated-thumb"),document.querySelector(".animated-thumb")){let e=lightGallery(document.querySelector(".animated-thumb"),{selector:".thumb-img",thumbnail:!0,download:!1,height:"100%",width:"100%",iframeMaxWidth:"100%",subHtmlSelectorRelative:!0,showCloseIcon:!0,mobileSettings:{controls:!0,showCloseIcon:!0,download:!1}}),t=null,o=(document.querySelector(".animated-thumb").addEventListener("lgAfterOpen",function(){t=setInterval(()=>{e.goToNextSlide()},5e3)}),document.querySelector(".animated-thumb").addEventListener("lgAfterClose",function(){clearInterval(t)}),document.querySelector(".lg-prev")),r=document.querySelector(".lg-next"),a=document.querySelector(".lg-container");var n=document.querySelector(".lg-close");let i=!1;a.addEventListener("mousemove",e=>{var t;i||(t=(t=a.getBoundingClientRect()).left+t.width/2,o.style.left=e.clientX+"px",o.style.top=e.clientY+"px",r.style.left=e.clientX+"px",r.style.top=e.clientY+"px",e.clientX<t?(o.style.display="block",r.style.display="none"):(o.style.display="none",r.style.display="block",r.style.transform="scale(1) translate(-200%, -150%)"))}),a.addEventListener("mouseleave",()=>{o.style.display="none",r.style.display="none"}),n.addEventListener("mouseenter",()=>{i=!0,r.style.transform="scale(0) translate(-200%, -150%)"}),n.addEventListener("mouseleave",()=>{i=!1,r.style.transform="scale(1) translate(-200%, -150%)"})}}function fadeTextFooter(){gsap.set("data-text-footer",{opacity:0,y:20});var e=gsap.timeline({paused:!0});e.fromTo("[data-text-footer]",{opacity:0,y:20},{opacity:1,y:0,stagger:.05,duration:.6,ease:"power2.out"}),ScrollTrigger.create({trigger:"footer",start:"top 80%",animation:e,toggleActions:"play none none none"})}function fadeTextPageDetail(){let o=gsap.timeline();isSafari?gsap.utils.toArray("[data-effect-auto]").forEach(e=>{gsap.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{scrollTrigger:{trigger:e,start:"top 75%",end:"bottom 75%"},opacity:1,y:0,duration:.5,ease:"sine.out"})}):0<(e=document.querySelectorAll("[data-splitting][data-effect-auto]")).length&&e.forEach(e=>{e=e.querySelectorAll(".char");o.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,stagger:.05,duration:.3,ease:"sine.out"})});var e=gsap.utils.toArray("[data-fade-auto]"),e=(0<e.length&&e.forEach(e=>{var t=parseFloat(e.dataset.delay)||0;o.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"sine.out",delay:t})}),document.querySelectorAll("[data-fade-desc-auto]")),e=(0<e.length&&e.forEach(e=>{new SplitType(e,{types:"lines, words",lineClass:"split-line",wordClass:"split-word"});let t=gsap.timeline({paused:!0});t.fromTo(e.querySelectorAll(".split-word"),{y:"100%",opacity:0},{y:"0%",opacity:1,duration:.5,ease:"none",stagger:0}),setTimeout(()=>{t.play()},1e3)}),gsap.utils.toArray("[data-fade-auto-button]")),e=(0<e.length&&e.forEach(e=>{o.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,duration:.1,ease:"none"})}),gsap.utils.toArray("[data-fade-auto-bottom]"));0<e.length&&e.forEach(e=>{o.fromTo(e,{"will-change":"opacity, transform",opacity:0,y:20},{opacity:1,y:0,duration:.5,ease:"sine.out",stagger:.1})})}function contactForm(){if(!($(".contact-form").length<1)){let r=$("#contact-form"),a=r.find("input[name='name']"),i=r.find("input[name='email']"),n=r.find("input[type='tel']"),o=r.find("textarea[name='message']"),l=$("#contact_checkbox"),s=r.find("button[type='submit']");function e(){var e=""!==a.val().trim(),t=""!==i.val().trim(),o=""!==n.val().trim(),r=l.is(":checked");e&&t&&o&&r?s.removeAttr("disabled"):s.attr("disabled",!0)}a.on("input",e),i.on("input",e),n.on("input",e),l.on("change",e),e(),r.on("submit",function(e){e.preventDefault(),r.find(".error-message").remove(),r.find("input, textarea").removeClass("error");let t=!0;a.val().trim()||(a.addClass("error"),t=!1),i.val().trim()||(i.addClass("error"),t=!1),n.val().trim()||(n.addClass("error"),t=!1),l.is(":checked")||(l.addClass("error"),t=!1),t&&$.ajax({type:"POST",url:ajaxUrl,data:{action:"submit_contact_form",name:a.val().trim(),email:i.val().trim(),phone:n.val().trim(),messageNote:o.val().trim()},beforeSend:function(){$(".contact-message").remove()},success:function(e){$(".contact-message").remove(),r[0].reset(),$("#modalBookingSuccess").modal("show"),s.attr("disabled",!0)},error:function(e,t,o){console.error("Lỗi khi gửi form:",o),$(".contact-message").remove(),r.append('<span class="contact-message" style="color: red;">Có lỗi xảy ra, vui lòng thử lại sau.</span>')}})})}}function getNewletter(){$("#form-newletter").on("submit",function(e){e.preventDefault();let t=$(this);var o,e=t.find("input[type='email']");e.removeClass("error"),t.siblings("span").remove(),e.length?(o=e.val()?e.val().trim():"")?$.ajax({type:"POST",url:ajaxUrl,data:{action:"costamigo_receive_newletter",email:o},beforeSend:function(){console.log("Đang gửi dữ liệu...")},success:function(e){t[0].reset(),$("#modalNewsletterSuccess").modal("show")},error:function(e,t,o){console.error("Lỗi khi gửi form:",o),alert("Có lỗi xảy ra, vui lòng thử lại sau.")}}):e.addClass("error"):console.error("Không tìm thấy input email trong form.")})}isSafari||Splitting(),($=jQuery)(window).on("DOMContentLoaded",function(){setTimeout(()=>{loading()},2e3)});let init=()=>{gsap.registerPlugin(ScrollTrigger),updateSvgHeight(),fadeTextFooter(),headerMenu(),scrollHeader(),animationArt(),sectionSlider(),animationMaskCentral(),swiperOffer(),animationText(),imgWithText(),swiperRestaurant(),toggleDropdown(),gallery(),animationLineMap(),swiperAct(),magicCursor(),detailSlider(),modalBooking(),contactForm(),getNewletter(),ScrollTrigger.refresh()};togglePlayMusic(),window.addEventListener("resize",()=>{animationText()}),preloadImages("img").then(()=>{init()});